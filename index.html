<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Positiva</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="CotizadorDeu_errorcitoModal">
      <div class="CotizadorDeu_errorcitoModal_imgC">
        <img
          src="./assets/hexagono-equis.png"
          alt="exagono error"
          class="CotizadorDeu_errorcitoModal_imgC_img"
        />
      </div>
      <div class="CotizadorDeu_errorcitoModal_titleC">
        <h3 class="CotizadorDeu_errorcitoModal_titleC_t"></h3>
        <p class="CotizadorDeu_errorcitoModal_titleC_p"></p>
      </div>
      <span class="CotizadorDeu_errorcitoModal_x">&#10005;</span>
    </div>
    <div class="CotizadorDeu">
      <a href="/#" class="CotizadorDeu_button"
        ><span class="CotizadorDeu_button_flecha">&#171;</span>Volver al seguro
        deudor</a
      >
      <div class="containerFormYResult">
        <div class="formCotizaSeguroVida">
          <h2 class="formCotizaSeguroVida_title">
            Cotiza tu seguro <span style="color: #ff7500">de vida</span>
          </h2>

          <div class="formCotizaSeguroVida_formContainer">
            <form action="" id="formCotizaSeguroVida">
              <span class="formCotizaSeguroVida_inputContainer">
                <label for="manejaMoto" class="formCotizaSeguroVida_label"
                  >Manejas moto*</label
                >
                <select
                  name="motoSegurosDeudores"
                  id="motoSegurosDeudores"
                  class="formCotizaSeguroVida_select"
                  required
                >
                  <option value="">Elige una opción</option>
                </select>
              </span>

              <span class="formCotizaSeguroVida_inputContainer">
                <label for="edadPersona" class="formCotizaSeguroVida_label"
                  >Tu edad*</label
                >
                <select
                  name="edadPersona"
                  id="edadPersona"
                  class="formCotizaSeguroVida_select"
                  required
                >
                  <!--Se llena desde js-->
                </select>
              </span>

              <span class="formCotizaSeguroVida_inputContainer">
                <label for="ocupacionPersona" class="formCotizaSeguroVida_label"
                  >Ocupacion*</label
                >
                <select
                  name="ocupacionSegurosDeudores"
                  id="ocupacionSegurosDeudores"
                  class="formCotizaSeguroVida_select"
                  required
                >
                  <option value="" disabled selected>
                    Selecciona una opción
                  </option>
                </select>
              </span>

              <span class="formCotizaSeguroVida_inputContainer">
                <label for="creditoPersona" class="formCotizaSeguroVida_label"
                  >Tipo de crédito*</label
                >
                <select
                  name="tipoCreditoSegurosDeudores"
                  id="tipoCreditoSegurosDeudores"
                  class="formCotizaSeguroVida_select"
                >
                  <option value="" disabled selected>
                    Selecciona una opción
                  </option>
                </select>
              </span>

              <div class="formCotizaSeguroVida_radioC">
                <label class="formCotizaSeguroVida_switch">
                  <input
                    type="checkbox"
                    id="showRadios"
                    class="formCotizaSeguroVida_inputCheck"
                  />
                  <span class="formCotizaSeguroVida_slider"></span>
                </label>
                <label
                  for="showRadios"
                  class="formCotizaSeguroVida_label labelDeInputCheck"
                  >Incapacidad total y permanente</label
                >
              </div>

              <div id="formCotizaSeguroVida_radios" class="hiddenRadios">
                <label class="formCotizaSeguroVida_radios_label">
                  <input
                    type="radio"
                    name="additionalOption"
                    value="opcion1"
                    class="formCotizaSeguroVida_radios_input"
                  />
                  Enfermedades graves
                </label>
                <label class="formCotizaSeguroVida_radios_label">
                  <input
                    type="radio"
                    name="additionalOption"
                    value="opcion2"
                    class="formCotizaSeguroVida_radios_input"
                  />
                  Auxilio funerario
                </label>
              </div>

              <span class="formCotizaSeguroVida_inputContainer">
                <label for="Ubicacion" class="formCotizaSeguroVida_label"
                  >Ubicación geográfica*</label
                >
                <select
                  name="ubicacionGeograficaSegurosDeudores"
                  id="ubicacionGeograficaSegurosDeudores"
                  class="formCotizaSeguroVida_select"
                  required
                >
                  <option value="" disabled selected>
                    Selecciona una opción
                  </option>
                </select>
              </span>

              <span class="formCotizaSeguroVida_inputContainer">
                <label
                  for="valorActualDinero"
                  class="formCotizaSeguroVida_label"
                  >Valor actual de la deuda*</label
                >

                <input
                  type="text"
                  id="valorActualDinero"
                  class="formCotizaSeguroVida_input"
                  placeholder="$"
                />
              </span>
              <div class="containerButtonSubmit">
                <input
                  type="submit"
                  value="Cotizar"
                  class="formCotizaSeguroVida_button"
                />
              </div>
            </form>
          </div>
        </div>

        <div class="resultadoCotizacion">
          <h2 class="resultadoCotizacion_title">
            Resultado de <span style="color: #173748"> la cotización</span>
          </h2>
          <div class="resultadoCotizacion_bgGray">
            <div class="resultadoCotizacion_containerCosto">
              <p class="resultadoCotizacion_containerCosto_costo">
                El costo de tu seguro es
              </p>
              <p class="resultadoCotizacion_containerCosto_total">-------</p>
            </div>
            <p class="resultadoCotizacion_bgGray_anual">______</p>
          </div>
          <h3 class="resultadoCotizacion_incluye">Este costo incluye:</h3>

          <div class="resultadoCotizacionImg">
            <img
              src="./assets/pc.png"
              alt="pc con cara sonriente"
              class="resultadoCotizacionImg_img"
            />
            <p class="resultadoCotizacionImg_text">
              Diligencia el formulario de cotización para conocer el costo y las
              coberturas del seguro
            </p>
          </div>
        </div>

        <div class="resultadoCotizacionInfo">
          <h2 class="resultadoCotizacion_title">
            Resultado de <span style="color: #173748"> la cotización</span>
          </h2>
          <div class="resultadoCotizacion_bgGray">
            <div class="resultadoCotizacion_containerCosto">
              <p class="resultadoCotizacion_containerCosto_costo">
                El costo de tu seguro es
              </p>
              <p class="resultadoCotizacion_containerCosto_total"> $ 900.000</p>
            </div>
            <p class="resultadoCotizacion_bgGray_anual">Anual</p>
          </div>
          <h3 class="resultadoCotizacion_incluye">Este costo incluye:</h3>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Muerte por cualquier causa</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 35.000.000</span>
          </div>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Amparo de auxilio funerario</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 35.000.000</span>
          </div>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Daños a terceros</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 35.000.000</span>
          </div>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Incapacidad total o permanente (Invalidez)</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 7.000.000</span>
          </div>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Gastos de defensa</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 7.000.000</span>
          </div>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Perdida total por daño</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 2.500.000</span>
          </div>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Perdida total por hurto</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 2.500.000</span>
          </div>
          <div class="coverage-item">
            <div class="coverage-name">
              <img
                class="heart-icon"
                src="https://webserver-portalsegurospositiva-uat.lfr.cloud/documents/2978451/4403000/corazoncito.svg/ff8bf352-9726-acea-ac35-c37525bf4606?t=1732558972552"
                alt="heart-icon"
              />
              <span class="resultadoCotizacion_containerCosto_costo">Asistencia por movilidad</span>
            </div>
            <span class="resultadoCotizacion_container_item_seguro">$ 2.500.000</span>
          </div>

          <section class="button-section">
            <button>Quiero este seguro</button>
          </section>
          
        </div>
      </div>
      <!-- Modal -->
      <div id="errorModal_CotizarSeguro" class="cotizarSeguroModal">
        <div class="modalCotitizarSeguro_content">
          <span class="closeModalCotizarSeguro"
            ><img src="./assets/cerrar.png" alt="cerrar modal"
          /></span>
          <div class="ModalCotizarSeguroError">
            <img
              src="./assets/errorImg.png"
              alt="imagen de error"
              class="ModalCotizarSeguroError_img"
            />
            <h4 class="ModalCotizarSeguroError_title">Monto no válido</h4>
            <hr class="ModalCotizarSeguroError_hr" />
            <p class="ModalCotizarSeguroError_p">
              El monto debe ser igual o mayor a $500,000 o igual o mayor a
              $14,000,000 para continuar.
            </p>
          </div>
        </div>
      </div>

      <!-- Tu formulario sigue igual -->
    </div>
    <script>
      const selectElement = document.querySelector("#edadPersona");
      for (let edad = 18; edad <= 65; edad++) {
        const option = document.createElement("option");
        option.value = `${edad}years`;
        option.textContent = `${edad} años`;
        selectElement.appendChild(option);
      }

      document.addEventListener("DOMContentLoaded", () => {
        const formularCotizarSeguro = document.querySelector(
          "#formCotizaSeguroVida"
        );
        const valorActualDinero = document.querySelector("#valorActualDinero");
        const errorModal = document.querySelector(
          ".CotizadorDeu_errorcitoModal"
        );
        const errorTitle = document.querySelector(
          ".CotizadorDeu_errorcitoModal_titleC_t"
        );
        const errorMessage = document.querySelector(
          ".CotizadorDeu_errorcitoModal_titleC_p"
        );
        const switchInput = document.querySelector("#showRadios");
        const radioContainer = document.querySelector(
          "#formCotizaSeguroVida_radios"
        );
        const closeModalConFoto = document.querySelector(
          ".closeModalCotizarSeguro"
        );

        const errorDeIncapacidadLabel =
          document.querySelector(".labelDeInputCheck");
        const errorModal_CotizarSeguro = document.querySelector(
          "#errorModal_CotizarSeguro"
        );

        valorActualDinero.addEventListener("input", function (e) {
          const input = e.target;
          let value = input.value.replace(/[^0-9]/g, ""); // Solo números

          if (value) {
            value = new Intl.NumberFormat("es-CO").format(value); // Formato colombiano
            input.value = `$ ${value}`;
          } else {
            input.value = "";
          }
        });

        switchInput.addEventListener("change", () => {
          if (switchInput.checked) {
            radioContainer.classList.remove("hiddenRadios");
            radioContainer.classList.add("containerRadiosE");
            errorDeIncapacidadLabel.classList.remove("textoRojoError");
            errorModal.style.display = "none";
          } else {
            radioContainer.classList.add("hiddenRadios");
            radioContainer.classList.remove("containerRadiosE");
          }
        });

        formularCotizarSeguro.addEventListener("submit", (event) => {
          event.preventDefault();

          const existingErrorParagraph = document.querySelector(
            ".formCotizaSeguroVida_errorP"
          );
          if (existingErrorParagraph) {
            existingErrorParagraph.remove();
          }
          let hayErrores = false;

          if (!switchInput.checked) {
            hayErrores = true;
            errorDeIncapacidadLabel.classList.add("textoRojoError");
            errorTitle.textContent = "Para poder continuar";
            errorMessage.textContent =
              "Debes seleccionar la cobertura Incapacidad Total y Permanente (TTP) para continuar con este crédito.";
            errorModal.style.display = "flex";
          }

          if (!valorActualDinero.value.trim()) {
            hayErrores = true;

            const errorParagraph = document.createElement("p");
            errorParagraph.classList.add("formCotizaSeguroVida_errorP");
            errorParagraph.textContent = "Ingresa la información";

            valorActualDinero.insertAdjacentElement("afterend", errorParagraph);

            errorTitle.textContent = "Completa los campos faltantes";
            errorMessage.textContent =
              "Por favor, completa todos los campos obligatorios para continuar.";
            errorModal.style.display = "flex";
            valorActualDinero.classList.add("borderRojoError");
          }

          valorActualDinero.addEventListener("input", () => {
            valorActualDinero.classList.remove("borderRojoError");

            const existingErrorParagraph = document.querySelector(
              ".formCotizaSeguroVida_errorP"
            );
            if (existingErrorParagraph) {
              existingErrorParagraph.remove();
              errorModal.style.display = "none";
            }
          });

          const value = parseInt(
            valorActualDinero.value.replace(/\D/g, ""), // Quitar caracteres no numéricos
            10
          );

          if (isNaN(value) || value < 500000 ) {
            // Mostrar el modal si el valor es inválido o menor a 500000
            errorModal_CotizarSeguro.style.display = "block";
          } else {
            // Aquí puedes manejar el envío del formulario si todo está correcto
            document.querySelector('.resultadoCotizacion').style.display = 'none';
            document.querySelector('.resultadoCotizacionInfo').style.display = 'block';
            alert("Formulario enviado correctamente.");
          }
        });

        // Cerrar el modal al hacer clic en la 'x'
        closeModalConFoto.addEventListener("click", () => {
          errorModal_CotizarSeguro.style.display = "none";
        });

        // Cerrar el modal al hacer clic fuera del contenido
        window.addEventListener("click", (event) => {
          if (event.target === errorModal_CotizarSeguro) {
            errorModal_CotizarSeguro.style.display = "none";
          }

          if (!hayErrores) {
            alert("Formulario enviado correctamente.");
            form.submit(); // Enviar solo si no hay errores
          }

          document
            .querySelector(".closeModalCotizarSeguro")
            .addEventListener("click", () => {
              errorModal.style.display = "none";
            });
          document
            .querySelector(".CotizadorDeu_errorcitoModal_x")
            .addEventListener("click", () => {
              errorModal.style.display = "none";
            });

          closeModal.addEventListener("click", () => {
            errorModal_CotizarSeguro.style.display = "none";
          });

          window.addEventListener("click", (event) => {
            if (event.target === errorModal_CotizarSeguro) {
              errorModal_CotizarSeguro.style.display = "none";
            }
          });
        });
      });
      // Datos simulados (JSON)
      const data = [
        {
          motoSegurosDeudores: [
            { id: 1, description: "Motocicleta" },
            { id: 2, description: "Cuatrimoto" },
            { id: 3, description: "Monociclo" },
            { id: 4, description: "Monopatín" },
            { id: 5, description: "Patín" },
          ],
        },
        {
          ocupacionSegurosDeudores: [
            { id: 1, description: "Ingeniero" },
            { id: 2, description: "Abogado" },
            { id: 3, description: "Médico" },
            { id: 4, description: "Contador" },
            { id: 5, description: "Periodista" },
          ],
        },
        {
          tipoCreditoSegurosDeudores: [
            { id: 1, description: "Libre Inversion" },
            { id: 2, description: "Leasing Habitacional" },
            { id: 3, description: "Hipotecario" },
            { id: 4, description: "Educativo" },
            { id: 5, description: "Bajo Monto" },
          ],
        },
        {
          ubicacionGeograficaSegurosDeudores: [
            { id: 1, description: "Bogota D.C" },
            { id: 2, description: "Tunja" },
            { id: 3, description: "Médellin" },
            { id: 4, description: "Cali" },
            { id: 5, description: "Barranquilla" },
          ],
        },
      ];

      const motoSegurosDeudoresSelect = document.getElementById(
        "motoSegurosDeudores"
      );
      const ocupacionSegurosDeudoresSelect = document.getElementById(
        "ocupacionSegurosDeudores"
      );
      const tipoCreditoSegurosDeudoresSelect = document.getElementById(
        "tipoCreditoSegurosDeudores"
      );
      const ubicacionGeograficaSegurosDeudores = document.getElementById(
        "ubicacionGeograficaSegurosDeudores"
      );
      const form = document.getElementById("form");

      // Función para cargar las opciones de motos en el combo box
      function loadMotos() {
        const motos = data[0].motoSegurosDeudores; // Tomamos las motos del primer objeto del array
        motos.forEach((moto) => {
          const option = document.createElement("option");
          option.value = moto.id; // Valor será el id de la moto
          option.textContent = moto.description; // Texto será la descripción de la moto
          motoSegurosDeudoresSelect.appendChild(option); // Agregar al select
        });
      }

      // Función para cargar las opciones de ocupaciones en el combo box
      function loadOcupaciones() {
        const ocupaciones = data[1].ocupacionSegurosDeudores; // Tomamos las ocupaciones del segundo objeto del array
        ocupaciones.forEach((ocupacion) => {
          const option = document.createElement("option");
          option.value = ocupacion.id; // Valor será el id de la ocupación
          option.textContent = ocupacion.description; // Texto será la descripción de la ocupación
          ocupacionSegurosDeudoresSelect.appendChild(option); // Agregar al select
        });
      }

      // Función para cargar las opciones de tipo credito en el combo box
      function loadTipoCredito() {
        const tipoCredito = data[2].tipoCreditoSegurosDeudores; // Tomamos las motos del primer objeto del array
        tipoCredito.forEach((tipoCredito) => {
          const option = document.createElement("option");
          option.value = tipoCredito.id; // Valor será el id de la moto
          option.textContent = tipoCredito.description; // Texto será la descripción de la moto
          tipoCreditoSegurosDeudoresSelect.appendChild(option); // Agregar al select
        });
      }

      // Función para cargar las opciones de ubicacion geografica en el combo box
      function loadUbicacionGeografica() {
        const ubicacionGeografica = data[3].ubicacionGeograficaSegurosDeudores; // Tomamos las ocupaciones del segundo objeto del array
        ubicacionGeografica.forEach((ubicacionGeografica) => {
          const option = document.createElement("option");
          option.value = ubicacionGeografica.id; // Valor será el id de la ocupación
          option.textContent = ubicacionGeografica.description; // Texto será la descripción de la ocupación
          ubicacionGeograficaSegurosDeudores.appendChild(option); // Agregar al select
        });
      }

      // Cargar las opciones al iniciar la página
      loadMotos();
      loadOcupaciones();
      loadTipoCredito();
      loadUbicacionGeografica();
      document.querySelector('.resultadoCotizacionInfo').style.display = 'none';

      // Validación del formulario
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const moto = motoSegurosDeudoresSelect.value;
        const ocupacion = ocupacionSegurosDeudoresSelect.value;

        // Validamos que ambos campos estén seleccionados
        if (!moto || !ocupacion) {
          document.getElementById("error-message").textContent =
            "Por favor, selecciona ambos campos. 000";
        } else {
          document.getElementById("error-message").textContent = ""; // Limpiamos el mensaje de error
          alert("Formulario enviado correctamente");
        }
      });
    </script>
  </body>
</html>
